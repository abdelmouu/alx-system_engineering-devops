#!/usr/bin/env bash

# Install Nginx if not already installed
if ! dpkg -l | grep -q nginx; then
    apt-get update
    apt-get install -y nginx
fi

# Configure Nginx to use a custom 404 page
sed -i '/server_name _;/a \
error_page 404 /404.html;\
location = /404.html {\
    root /var/www/html;\
    internal;\
}' /etc/nginx/sites-available/default

# Create the custom 404 page
echo "Ceci n'est pas une page" > /var/www/html/404.html

# Remove default index.html
rm -f /var/www/html/index.nginx-debian.html

# Create a simple index.html
echo "Hello World!" > /var/www/html/index.html

# Restart Nginx
service nginx restart
